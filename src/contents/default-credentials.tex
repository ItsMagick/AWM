%! Author = chaorn
%! Date = 13.02.24

\section{Initiale Konfiguration}\label{sec:initiale-konfiguration}
\subsection{Benutzerverwaltung}\label{subsec: benutzerverwaltung}
Zur initialen Konfiguration gehört das Verändern der default Nutzern, um den Einfallswinkel für einfache Angriffe zu minimieren.
Um diesem Fehler vorzubeugen wird zunächst ein neuer Nutzer angelegt.
Der Nutzer in diesem Beispiel trägt den Namen \textit{svuser}. \\
\input{listings/adduser}
Nun wird ein zweiter Nutzer \textit{svadmin} angelegt.
Dieser ist gerade für die Wartung und weiterentwicklung der Raspberry Pi wichtig, um weitere Änderungen am Betriebssystem vornehmen zu können. \\
\blankline
Mit dem neu erzeugten Nutzer sollen nun weitere Änderungen vorgenommen werden.
Dazu gehört das Abschalten des default Nutzers \textit{pi} mit hohen Privilegien. \\
\input{listings/disable-default}
\blankline
Im Anschluss ist es eine gute Idee den \textit{root} Benutzer zu konfigurieren.
Hierzu wird der ~\gls{ssh}-Zugriff von diesem Benutzer abgeschaltet.
Um das zu bewerkstelligen, wird eine Benutzergruppe ssh-users angelegt und der aktuell angemeldete Benutzer dieser Gruppe hinzugefügt.
Zum Inkrafttreten des Verbots sich mit dem \textit{root} Nutzer anmelden zu können müssen folgende Änderungen in der ~\gls{ssh}-Konfigurationsdatei in \textbf{/etc/ssh/sshd\_config} vorgenommen werden:
\begin{itemize}
    \item PermitRootLogin no
    \item AllowGroups ssh-users
\end{itemize}
\input{listings/ssh-users}
Jetzt muss für das Inkrafttreten der Änderungen der ~\gls{ssh}-Prozess neu gestartet werden.
\input{listings/restart-ssh}

\subsection{Abschalten der Wireless Interfaces}\label{subsec:abschalten-des-wireless-interface}
Ein weiterer präemptiver Schritt zum Vorbeugen von weitverbreiteten Angriffsvektoren besteht daraus das \textit{Wireless Interface} des Raspberry Pi zu deaktivieren.
Diese Entscheidung beruht auf der Tatsache, dass der Pi3 mit einer statischen \gls{ip}-Addresse versehen wurde und nur über ~\gls{lan} erreichbar sein soll, um die Überwachung
des Netzwerktraffic über den IT-Service einfacher zu gestalten. \\
\input{listings/disable-wlan}
Hier wurde auch das Bluetooth Interface deaktiviert, da es derzeit dieser Funktionalität nicht bedarf.
Nach dem Anbeifügen der Konfigurationsdaten in der \textit{config.txt} folgt jetzt ein Neustart des Systems, um überprüfen zu können, ob die Veränderungen übernommen wurden.
\subsection{optional: SSH Konfiguration}\label{subsec:ssh-konfiguration}
Zum weiteren Absichern des ~\gls{ssh}-Zugangs wäre es möglich dem erstellten Nutzer unter \textbf{/home/svuser/.ssh/authorized\_keys} einen Public Key abzulegen.
Dieser könnte dann zum passwortlosen Einloggen mittels des ~\gls{ssh}-keys verwendet werden.
Um nun keine Redundante Einloggmöglichkeiten zu haben, würde man in der ~\ref{sec:initiale-konfiguration} beschriebenen Konfigurationsdatei die Zeilen
\begin{itemize}
    \item PubkeyAuthentication yes
    \item PasswordAuthentication no
\end{itemize}
hinzufügen.
Die Änderung tritt jedoch erst inkraft, wenn man den im Hintergrund laufenden ~\gls{ssh} Prozess neu startet.~\ref{restart-ssh}
Von dieser Konfiguration wurde in diesem Projekt aufgrund Inkonsistenz der Besetzung der ~\gls{it}-Abteilung der ~\gls{sv} abgesehen.
